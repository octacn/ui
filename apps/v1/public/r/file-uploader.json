{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "file-uploader",
  "type": "registry:component",
  "files": [
    {
      "path": "registry/components/file-uploader.tsx",
      "content": "\"use client\"\n\nimport { useCallback, useState } from \"react\"\nimport { AnimatePresence, motion } from \"motion/react\"\nimport { useDropzone } from \"react-dropzone\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardFooter, CardHeader } from \"@/components/ui/card\"\n\ninterface UploadedFile {\n  id: string\n  file: File\n  preview: string\n  progress: number\n  isUploading: boolean\n  isComplete: boolean\n}\n\n/**\n * The props is used\n *\n * @public\n */\ninterface ImageUploaderProps {\n  className?: string\n  maxFiles?: number\n  maxSize?: number\n  onUploadComplete?: (files: File[]) => void\n  onCancel?: () => void\n  onPublish?: (files: File[]) => void\n}\n\nexport const FileUploader: React.FC<ImageUploaderProps> = ({\n  maxFiles = 10,\n  maxSize = 20 * 1024 * 1024,\n  onUploadComplete,\n  onCancel,\n  onPublish,\n  className,\n}) => {\n  const [uploadedFiles, setUploadedFiles] = useState<UploadedFile[]>([\n    {\n      id: \"demo-1\",\n      file: new File([\"\"], \"demo.jpg\", { type: \"image/jpeg\" }),\n      preview: \"/images/blocks/sidebar-structure.png\",\n      progress: 100,\n      isUploading: false,\n      isComplete: true,\n    },\n  ])\n\n  const simulateUpload = useCallback((fileId: string) => {\n    const updateProgress = () => {\n      setUploadedFiles((prev) =>\n        prev.map((file) => {\n          if (file.id === fileId && file.isUploading) {\n            const increment = Math.random() * 15 + 5\n            const newProgress = Math.min(file.progress + increment, 100)\n            const isComplete = newProgress >= 100\n\n            return {\n              ...file,\n              progress: newProgress,\n              isUploading: !isComplete,\n              isComplete,\n            }\n          }\n          return file\n        })\n      )\n    }\n\n    const interval = setInterval(() => {\n      setUploadedFiles((prev) => {\n        const file = prev.find((f) => f.id === fileId)\n        if (!file || !file.isUploading) {\n          clearInterval(interval)\n          return prev\n        }\n        updateProgress()\n        return prev\n      })\n    }, 200)\n\n    return () => clearInterval(interval)\n  }, [])\n\n  const onDrop = useCallback(\n    (acceptedFiles: File[]) => {\n      const newFiles: UploadedFile[] = acceptedFiles.map((file) => ({\n        id: Math.random().toString(36),\n        file,\n        preview: URL.createObjectURL(file),\n        progress: 0,\n        isUploading: true,\n        isComplete: false,\n      }))\n\n      setUploadedFiles((prev) => {\n        const filteredPrev = prev.filter((f) => !f.id.startsWith(\"demo-\"))\n\n        return [...newFiles, ...filteredPrev]\n      })\n\n      newFiles.forEach((file) => {\n        setTimeout(() => simulateUpload(file.id), Math.random() * 500)\n      })\n\n      setTimeout(() => {\n        setUploadedFiles((prev) => {\n          const allFiles = prev.map((f) => f.file)\n          onUploadComplete?.(allFiles)\n          return prev\n        })\n      }, 3000)\n    },\n    [simulateUpload, onUploadComplete]\n  )\n\n  const removeFile = useCallback((fileId: string) => {\n    setUploadedFiles((prev) => {\n      const fileToRemove = prev.find((f) => f.id === fileId)\n      if (fileToRemove) {\n        URL.revokeObjectURL(fileToRemove.preview)\n      }\n      return prev.filter((f) => f.id !== fileId)\n    })\n  }, [])\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: {\n      \"image/*\": [\".jpeg\", \".jpg\", \".png\", \".gif\", \".webp\"],\n    },\n    maxSize,\n    maxFiles,\n    multiple: true,\n  })\n\n  const handleCancel = () => {\n    uploadedFiles.forEach((file) => {\n      URL.revokeObjectURL(file.preview)\n    })\n    setUploadedFiles([])\n    onCancel?.()\n  }\n\n  const handlePublish = () => {\n    const completedFiles = uploadedFiles\n      .filter((f) => f.isComplete)\n      .map((f) => f.file)\n    onPublish?.(completedFiles)\n  }\n\n  return (\n    <Card className={cn(\"max-w-sm w-sm bg-surface\", className)}>\n      <CardHeader {...getRootProps()}>\n        <motion.div\n          className={cn(\n            \"relative border border-dashed rounded-xl py-14 text-center cursor-pointer transition-all duration-200 overflow-hidden flex flex-col items-center justify-center\",\n            isDragActive\n              ? \"border-blue-400\"\n              : \"border-blue-400  hover:border-gray-400\"\n          )}\n          variants={{\n            initial: { x: 0, y: 0, opacity: 1 },\n            hover: {\n              x: 4,\n              y: 6,\n              opacity: 0.95,\n              transition: { duration: 0.1 },\n            },\n            tap: {\n              scale: 0.97,\n              transition: { duration: 0.1 },\n            },\n          }}\n          initial=\"initial\"\n          whileHover=\"hover\"\n          whileTap=\"tap\"\n          role=\"button\"\n          aria-label=\"Upload images by clicking or dragging and dropping\"\n        >\n          <input {...getInputProps()} aria-describedby=\"upload-description\" />\n\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            className=\"size-10 text-muted-foreground\"\n          >\n            <path d=\"M12 13v8\" />\n            <path d=\"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242\" />\n            <path d=\"m8 17 4-4 4 4\" />\n          </svg>\n\n          <p className=\"text-base text-foreground/90 tracking-tight font-inter mt-1\">\n            Upload Images\n          </p>\n          <p className=\"text-muted-foreground\">or drag and drop</p>\n\n          <p\n            id=\"upload-description\"\n            className=\"text-sm text-muted-foreground mt-1\"\n          >\n            [Max. File size: {Math.round(maxSize / (1024 * 1024))}MB]\n          </p>\n        </motion.div>\n      </CardHeader>\n\n      <CardContent>\n        <h4 className=\"text-muted-foreground font-inter tracking-wide capitalize pb-2\">\n          Images uploaded\n        </h4>\n        <AnimatePresence>\n          {uploadedFiles.length > 0 && (\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: \"auto\" }}\n              exit={{ opacity: 0, height: 0 }}\n              transition={{ duration: 0.3 }}\n            >\n              <div className=\"flex gap-3 overflow-x-auto no-scrollbar\">\n                {uploadedFiles.map((file) => (\n                  <motion.div\n                    key={file.id}\n                    initial={{ opacity: 0, scale: 0.8 }}\n                    animate={{ opacity: 1, scale: 1 }}\n                    exit={{ opacity: 0, scale: 0.8 }}\n                    transition={{ duration: 0.2 }}\n                    className=\"relative group aspect-square size-30 rounded-md overflow-hidden shadow-sm flex-shrink-0\"\n                  >\n                    <div className=\"relative w-full h-full rounded-lg overflow-hidden\">\n                      <img\n                        src={file.preview || \"/placeholder.svg\"}\n                        alt={`Uploaded ${file.file.name}`}\n                        className=\"w-full h-full object-cover\"\n                      />\n                      {file.isUploading && (\n                        <div className=\"absolute inset-0 backdrop-blur-xs bg-foreground/1 flex items-center justify-center\">\n                          <div className=\"w-12 h-12 relative\">\n                            <svg\n                              className=\"w-12 h-12 transform -rotate-90 text-white/85\"\n                              viewBox=\"0 0 36 36\"\n                            >\n                              <path\n                                stroke=\"currentColor\"\n                                strokeWidth=\"3\"\n                                fill=\"none\"\n                                d=\"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831\"\n                              />\n                              <motion.path\n                                stroke=\"currentColor\"\n                                strokeWidth=\"2\"\n                                fill=\"none\"\n                                strokeLinecap=\"round\"\n                                d=\"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831\"\n                                initial={{ strokeDasharray: \"0 100\" }}\n                                animate={{\n                                  strokeDasharray: `${file.progress} 100`,\n                                }}\n                                transition={{ duration: 0.2, ease: \"easeOut\" }}\n                              />\n                            </svg>\n\n                            <p className=\"absolute inset-0 flex items-center justify-center text-xs text-white/90\">\n                              {Math.round(file.progress)}%\n                            </p>\n                          </div>\n                        </div>\n                      )}\n\n                      <motion.button\n                        initial={{ opacity: 0 }}\n                        animate={{ opacity: file.isComplete ? 1 : 0 }}\n                        onClick={(e) => {\n                          e.stopPropagation()\n                          removeFile(file.id)\n                        }}\n                        className=\"absolute top-0 right-0 w-6 h-6 bg-red-500/90 flex items-center justify-center hover:bg-red-600 transition-colors\"\n                        aria-label={`Remove ${file.file.name}`}\n                      >\n                        <svg\n                          xmlns=\"http://www.w3.org/2000/svg\"\n                          viewBox=\"0 0 24 24\"\n                          fill=\"none\"\n                          stroke=\"currentColor\"\n                          strokeWidth=\"2\"\n                          strokeLinecap=\"round\"\n                          strokeLinejoin=\"round\"\n                          className=\"size-4 text-white/80\"\n                        >\n                          <path d=\"M18 6 6 18\" />\n                          <path d=\"m6 6 12 12\" />\n                        </svg>\n                      </motion.button>\n                    </div>\n                  </motion.div>\n                ))}\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n        {uploadedFiles.length === 0 && (\n          <motion.p\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            className=\"text-center font-inter text-muted-foreground\"\n          >\n            No images uploaded here\n          </motion.p>\n        )}\n      </CardContent>\n\n      <div className=\"w-full border border-dashed\" />\n\n      <CardFooter className=\"grid grid-cols-2 gap-4\">\n        <motion.div whileHover={{ scale: 1.02 }} whileTap={{ scale: 0.98 }}>\n          <Button onClick={handleCancel} className=\"w-full\">\n            Cancel\n          </Button>\n        </motion.div>\n\n        <motion.div\n          whileHover={{ scale: 1.02 }}\n          whileTap={{ scale: 0.98 }}\n          onClick={handlePublish}\n        >\n          <Button\n            variant={\"secondary\"}\n            disabled={\n              uploadedFiles.length === 0 ||\n              uploadedFiles.some((f) => f.isUploading)\n            }\n            className=\"w-full\"\n          >\n            Publish\n          </Button>\n        </motion.div>\n      </CardFooter>\n    </Card>\n  )\n}\n",
      "type": "registry:component",
      "target": "components/file-uploader.tsx"
    }
  ]
}